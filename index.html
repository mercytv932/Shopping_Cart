<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart</title>
  <link rel = "stylesheet" href = "style.css">
</head>
<body>

<div>
<button id="cart-icon-button">ðŸ›’<span id="span"></span></button>
</div>

 <div id="productsContainer"></div> 

 <div id="cartView" style="display: none;"></div>

<script>
  const productsContainer = document.querySelector("#productsContainer");
  const cartButton = document.getElementById("cart-icon-button");
  const span = document.querySelector("#span");
  const cartView = document.querySelector("#cartView");



 let products = [
  {name: "Apple", id: 1, price: 1.99},
  {name: "Banana", id: 2, price: 0.99},
  {name:"Watermelon", id: 3, price: 1.50},
  
    {name:"Tomato", id: 4, price: 1.00},
    {name:"Potato", id: 5, price:1.00},
    {name: "Corn", id: 6, price:1.00},

  {name:"Milk", id: 7, price: 1.00},
  {name:"Water", id: 8, price:1.00},
  {name: "Bread", id: 9, price:1.00}  
 ];
 console.log(products);

 //empty cart to add
 let cart = [];
 console.log(cart);


   function updateCart(){
    span.textContent = cart.length;
  } updateCart();



     function displayCartItems(){
    cartView.innerHTML = "";
    cart.forEach(item=>{

      const newDiv = document.createElement("div");
      const newHTag = document.createElement("h4");
      const newPTag = document.createElement("p");

      newDiv.classList.add("newProduct");
      newHTag.textContent = `${item.name} (x${item.quantity})`;
      newPTag.textContent = `$${item.price}`;

     newDiv.appendChild(newHTag);
     newDiv.appendChild(newPTag);

     cartView.appendChild(newDiv);
     });

     calculateTotal();
  }


 products.forEach(product=>{
  const newDiv = document.createElement("div");
  const newHTag = document.createElement("h4");
  const newPTag = document.createElement("p");
  const addBtn = document.createElement("button");

  newDiv.classList.add("newProduct");
  newHTag.textContent = product.name;
  newPTag.textContent = `$${product.price}`;
  addBtn.textContent = "Add to cart";

  newDiv.appendChild(newHTag);
  newDiv.appendChild(newPTag);
  newDiv.appendChild(addBtn);

  productsContainer.appendChild(newDiv);


  addBtn.addEventListener("click", function(){
    
    const existingProduct = cart.find(item => item.id === product.id);
    if(existingProduct){
      existingProduct.quantity++;
      console.log(`Increased quantity of ${product.name}. New quantity: ${existingProduct.quantity}`);
    } else{

      cart.push({...product, quantity: 1});
      console.log(`Added new product to cart: ${product.name}`);
    }

    updateCart()
    displayCartItems();
    console.log(cart);//just for testing, can be removed later
  });

 });



 cartButton.addEventListener("click", function(){
  if(cartView.style.display =="none"){
    cartView.style.display = "block"// show
  }else{
    cartView.style.display = "none";
  }
 });

function calculateTotal(){
  let total = 0;

  for(let i=0; i < cart.length; i++){
    total += cart[i].price * cart[i].quantity;
  }


  const newDiv = document.createElement("div");
  newDiv.textContent = `Total: ${total.toFixed(2)}`;

  cartView.appendChild(newDiv);
}


</script>
</body>
</html>
